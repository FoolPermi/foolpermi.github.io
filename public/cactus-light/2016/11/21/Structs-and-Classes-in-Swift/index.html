<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="在 Swift 中结构体 (struct) 和类 (class) 有很多相似的地方，也有一些不同之处，下面记录并总结。内容主要参考了 Swift Apprentice。 StructBasicsStruct 作为一种常见的数据类型，在许多编程语言中都存在。我们使用 Struct 封装特定的数据结构。Swift 中赋予了 Struct 很多特性，比如 Struct 中除了可以定义属性外，还可以定义方">
<meta name="keywords" content="swift">
<meta property="og:type" content="article">
<meta property="og:title" content="Structs and Classes in Swift">
<meta property="og:url" content="http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/index.html">
<meta property="og:site_name" content="FoolPermi">
<meta property="og:description" content="在 Swift 中结构体 (struct) 和类 (class) 有很多相似的地方，也有一些不同之处，下面记录并总结。内容主要参考了 Swift Apprentice。 StructBasicsStruct 作为一种常见的数据类型，在许多编程语言中都存在。我们使用 Struct 封装特定的数据结构。Swift 中赋予了 Struct 很多特性，比如 Struct 中除了可以定义属性外，还可以定义方">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-06-14T17:21:07.915Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Structs and Classes in Swift">
<meta name="twitter:description" content="在 Swift 中结构体 (struct) 和类 (class) 有很多相似的地方，也有一些不同之处，下面记录并总结。内容主要参考了 Swift Apprentice。 StructBasicsStruct 作为一种常见的数据类型，在许多编程语言中都存在。我们使用 Struct 封装特定的数据结构。Swift 中赋予了 Struct 很多特性，比如 Struct 中除了可以定义属性外，还可以定义方">
    
    
        
          
              <link rel="shortcut icon" href="/cactus-light/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/cactus-light/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/cactus-light/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Structs and Classes in Swift</title>
    <!-- styles -->
    <link rel="stylesheet" href="/cactus-light/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/cactus-light/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/cactus-light/">Home</a></li>
         
          <li><a href="/cactus-light/about/">About</a></li>
         
          <li><a href="/cactus-light/archives/">Writing</a></li>
         
          <li><a href="https://github.com/FoolPermi">Projects</a></li>
         
          <li><a href="/cactus-light/search/">Search</a></li>
         
          <li><a href="/cactus-light/atom.xml">RSS</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/cactus-light/2016/11/22/Optionals-in-Swift/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/cactus-light/2016/11/20/Properties-in-Swift/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&text=Structs and Classes in Swift"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&is_video=false&description=Structs and Classes in Swift"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Structs and Classes in Swift&body=Check out this article: http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&name=Structs and Classes in Swift&description=&lt;p&gt;在 Swift 中&lt;strong&gt;结构体 (struct)&lt;/strong&gt; 和&lt;strong&gt;类 (class)&lt;/strong&gt; 有很多相似的地方，也有一些不同之处，下面记录并总结。内容主要参考了 &lt;em&gt;Swift Apprentice&lt;/em&gt;。&lt;/p&gt;
&lt;h2 id=&#34;Struct&#34;&gt;&lt;a href=&#34;#Struct&#34; class=&#34;headerlink&#34; title=&#34;Struct&#34;&gt;&lt;/a&gt;Struct&lt;/h2&gt;&lt;h3 id=&#34;Basics&#34;&gt;&lt;a href=&#34;#Basics&#34; class=&#34;headerlink&#34; title=&#34;Basics&#34;&gt;&lt;/a&gt;Basics&lt;/h3&gt;&lt;p&gt;Struct 作为一种常见的数据类型，在许多编程语言中都存在。我们使用 Struct 封装特定的数据结构。Swift 中赋予了 Struct 很多特性，比如 Struct 中除了可以定义属性外，还可以定义&lt;strong&gt;方法 (method)&lt;/strong&gt; 和&lt;strong&gt;构造函数 (initializer)&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;举个例子，为了表示在平面坐标系中的位置，定义一个结构体 Location，其中包括两个属性 x 和 y。&lt;/p&gt;
&lt;figure class=&#34;highlight swift&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;Location&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; x: &lt;span class=&#34;type&#34;&gt;Int&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; y: &lt;span class=&#34;type&#34;&gt;Int&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面就定义了一个结构体，然后就可以实例化以后使用，假如你没有实现  &lt;strong&gt;init&lt;/strong&gt; 方法的话，结构体可以根据属性自动产生一个构造器:&lt;/p&gt;
&lt;figure class=&#34;highlight swift&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; location = &lt;span class=&#34;type&#34;&gt;Location&lt;/span&gt;(x: &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;, y: &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;// 使用点运算符访问&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(location.x) &lt;span class=&#34;comment&#34;&gt;// 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(location.y) &lt;span class=&#34;comment&#34;&gt;// 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Struct"><span class="toc-number">1.</span> <span class="toc-text">Struct</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Basics"><span class="toc-number">1.1.</span> <span class="toc-text">Basics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Value-type"><span class="toc-number">1.2.</span> <span class="toc-text">Value type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Extensions"><span class="toc-number">1.3.</span> <span class="toc-text">Extensions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Conform-to-protocols"><span class="toc-number">1.4.</span> <span class="toc-text">Conform to protocols</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Class"><span class="toc-number">2.</span> <span class="toc-text">Class</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Basics-1"><span class="toc-number">2.1.</span> <span class="toc-text">Basics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reference-type"><span class="toc-number">2.2.</span> <span class="toc-text">Reference type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Extensions-1"><span class="toc-number">2.3.</span> <span class="toc-text">Extensions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Inheritance"><span class="toc-number">2.4.</span> <span class="toc-text">Inheritance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Polymorphism"><span class="toc-number">2.5.</span> <span class="toc-text">Polymorphism</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Preventing-inheritance"><span class="toc-number">2.6.</span> <span class="toc-text">Preventing inheritance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Required-and-convenience-initializers"><span class="toc-number">2.7.</span> <span class="toc-text">Required and convenience initializers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Retain-cycle-and-weak-references"><span class="toc-number">2.8.</span> <span class="toc-text">Retain cycle and weak references</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Structs and Classes in Swift
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">FoolPermi</span>
      </span>
      
    <div class="postdate">
        <time datetime="2016-11-21T15:15:36.000Z" itemprop="datePublished">21 Nov 2016</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/cactus-light/tags/swift/">swift</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>在 Swift 中<strong>结构体 (struct)</strong> 和<strong>类 (class)</strong> 有很多相似的地方，也有一些不同之处，下面记录并总结。内容主要参考了 <em>Swift Apprentice</em>。</p>
<h2 id="Struct"><a href="#Struct" class="headerlink" title="Struct"></a>Struct</h2><h3 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h3><p>Struct 作为一种常见的数据类型，在许多编程语言中都存在。我们使用 Struct 封装特定的数据结构。Swift 中赋予了 Struct 很多特性，比如 Struct 中除了可以定义属性外，还可以定义<strong>方法 (method)</strong> 和<strong>构造函数 (initializer)</strong>。</p>
<p>举个例子，为了表示在平面坐标系中的位置，定义一个结构体 Location，其中包括两个属性 x 和 y。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Location</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面就定义了一个结构体，然后就可以实例化以后使用，假如你没有实现  <strong>init</strong> 方法的话，结构体可以根据属性自动产生一个构造器:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> location = <span class="type">Location</span>(x: <span class="number">2</span>, y: <span class="number">4</span>)</span><br><span class="line"><span class="comment">// 使用点运算符访问</span></span><br><span class="line"><span class="built_in">print</span>(location.x) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">print</span>(location.y) <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>现在为 Location 增加一个方法用于计算距离坐标原点的距离。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Location</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">distanceToOrigin</span><span class="params">()</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="type">Double</span>(<span class="keyword">self</span>.x)</span><br><span class="line">    <span class="keyword">let</span> y = <span class="type">Double</span>(<span class="keyword">self</span>.y)</span><br><span class="line">    <span class="keyword">return</span> sqrt(x ** x + y ** y) </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用结构体中的方法</span></span><br><span class="line"><span class="keyword">var</span> location = <span class="type">Location</span>(x: <span class="number">3</span>, y: <span class="number">4</span>)</span><br><span class="line"><span class="keyword">let</span> <span class="built_in">distance</span> = location.distanceToOrigin() <span class="comment">// 点运算符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">distance</span>) <span class="comment">// 5.0</span></span><br></pre></td></tr></table></figure>
<h3 id="Value-type"><a href="#Value-type" class="headerlink" title="Value type"></a>Value type</h3><p>Struct 是<strong>值类型 (value type)</strong>，所以 Struct 在传递的时候拷贝的是<strong>值</strong>，而不是<strong>引用</strong>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> location1 = <span class="type">Location</span>(x: <span class="number">3</span>, y: <span class="number">4</span>)</span><br><span class="line"><span class="keyword">var</span> location2 = location1</span><br><span class="line">location1.x = <span class="number">4</span> <span class="comment">// 更改 location1</span></span><br><span class="line"><span class="built_in">print</span>(location1.x) <span class="comment">// 4</span></span><br><span class="line"><span class="built_in">print</span>(location2.x) <span class="comment">// 3, location2的值不变，说明两个实例分别占用的不是同一块内存</span></span><br></pre></td></tr></table></figure>
<h3 id="Extensions"><a href="#Extensions" class="headerlink" title="Extensions"></a>Extensions</h3><p>可以通过<strong>扩展 (extensions)</strong> 给一个结构体追加方法或者计算属性，但是不可以追加存储属性。此外，还可以在扩展中实现自定义的 <strong>init</strong> 方法，在扩展中实现的 <strong>init</strong> 方法将不会使结构体根据属性自动生成的 <strong>init</strong> 失效。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Location</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> gradient: <span class="type">Double</span> &#123; <span class="comment">// 追加一个计算属性来获取斜率</span></span><br><span class="line">    <span class="keyword">let</span> y = <span class="type">Double</span>(<span class="keyword">self</span>.y)</span><br><span class="line">    <span class="keyword">let</span> x = <span class="type">Double</span>(<span class="keyword">self</span>.x)</span><br><span class="line">    <span class="keyword">guard</span> x != <span class="number">0</span> <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> y / x</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">init</span>() &#123;</span><br><span class="line">    x = <span class="number">0</span></span><br><span class="line">    y = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> location1 = <span class="type">Location</span>() <span class="comment">// 使用自定义的init</span></span><br><span class="line"><span class="keyword">var</span> location2 = <span class="type">Location</span>(x: <span class="number">3</span>, y: <span class="number">4</span>) <span class="comment">// 使用自动生成的init</span></span><br></pre></td></tr></table></figure>
<h3 id="Conform-to-protocols"><a href="#Conform-to-protocols" class="headerlink" title="Conform to protocols"></a>Conform to protocols</h3><p>Struct 可以遵守<strong>协议 (protocols )</strong>，并实现协议定义的属性或方法。下面遵守协议并实现 <strong>description</strong> 的过程如下:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Location</span>: <span class="title">CustomStringConvertible</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"location at (\(x),\(y))."</span>  </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">distanceToOrigin</span><span class="params">()</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="type">Double</span>(<span class="keyword">self</span>.x)</span><br><span class="line">    <span class="keyword">let</span> y = <span class="type">Double</span>(<span class="keyword">self</span>.y)</span><br><span class="line">    <span class="keyword">return</span> sqrt(x ** x + y ** y) </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><h3 id="Basics-1"><a href="#Basics-1" class="headerlink" title="Basics"></a>Basics</h3><p>Swift中的类和结构体类似，也可以定义<strong>属性</strong>、<strong>方法</strong>、<strong>遵守协议</strong>。除此之外，类还拥有<strong>继承 (inheritance)</strong>、<strong>重写 (override)</strong>、<strong>多态 (polymorphism)</strong> 等结构体不具有的功能。</p>
<p>下面从实现一个 Person 类开始，Person 类中有两个存储属性和一个 <strong>init</strong> 方法，注意，class 并不会根据属性自动生成一个构造函数，所以必需手动实现 init 方法，假如没有提供，就会产生错误。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> firstName: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> lastName: <span class="type">String</span></span><br><span class="line">  <span class="keyword">init</span>(firstName: <span class="type">String</span>, lastName: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.firstName = firstName</span><br><span class="line">    <span class="keyword">self</span>.lastName = lastName</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> john = <span class="type">Person</span>(firstName: <span class="string">"Johnny"</span>, lastName: <span class="string">"Ivy"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Reference-type"><a href="#Reference-type" class="headerlink" title="Reference type"></a>Reference type</h3><p>在Swift 中，结构体是一个<strong>不可变的值类型 (immutable value)</strong>，而类则是<strong>可变的引用类型 (mutable reference)</strong>。所以即使类中的某个方法改变了类的内容，也不需要在方法前使用 <strong>mutating</strong> 关键字。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = <span class="type">Person</span>(firstName: <span class="string">"Bruce"</span>, lastName: <span class="string">"Lee"</span>)</span><br><span class="line"><span class="keyword">var</span> person2 = person1 <span class="comment">// 传递引用</span></span><br><span class="line"><span class="built_in">print</span>(person2.firstName) <span class="comment">// Bruce</span></span><br><span class="line">person1.firstName = <span class="string">"Jack"</span></span><br><span class="line"><span class="built_in">print</span>(person2.firstName) <span class="comment">// Jack</span></span><br></pre></td></tr></table></figure>
<p>若要比较两个对象指向的是不是同一块内存，可以使用 <strong>“===”</strong> 运算符，常用的 <strong>“==”</strong> 运算符只用于比较值是否相等。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = <span class="type">Person</span>(firstName: <span class="string">"Bruce"</span>, lastName: <span class="string">"Lee"</span>)</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="type">Person</span>(firstName: <span class="string">"Bruce"</span>, lastName: <span class="string">"Lee"</span>) <span class="comment">// person2和person1名字相同，是同一个人?</span></span><br><span class="line"><span class="keyword">var</span> person3 = person1 <span class="comment">// person3和person1指向同一块内存</span></span><br><span class="line"><span class="built_in">print</span>(person1 === person2) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(person1 === person3) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>因为对象是引用类型，所以即使将一个对象声明为常量，也可以改变对象中属性的值。常量表示对象指向内存的位置不可变，但是内存中存储的内容可以改变。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="type">Person</span>(firstName: <span class="string">"Bruce"</span>, lastName: <span class="string">"Lee"</span>) <span class="comment">// person为常量</span></span><br><span class="line">person.firstName = <span class="string">"Jack"</span> <span class="comment">// 更改person的属性</span></span><br><span class="line"><span class="built_in">print</span>(person.firstName) <span class="comment">// Jack, 属性的值仍然被改变了</span></span><br></pre></td></tr></table></figure>
<h3 id="Extensions-1"><a href="#Extensions-1" class="headerlink" title="Extensions"></a>Extensions</h3><p>与结构体类似，类也可以通过 extension 添加方法和计算属性。假如要添加一个计算属性  fullName，实现如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> fullName: <span class="type">String</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"\(firstName) \(lastName)"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h3><p><strong>继承 (inheritance)</strong> 可以实现类的扩展，为已存在的类增加新的属性和方法，或者对原有的方法进行<strong>重写 (override)</strong>。</p>
<p>假如有一个 Student 类，定义如下:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Grade</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> letter: <span class="type">String</span></span><br><span class="line">  <span class="keyword">let</span> points: <span class="type">Double</span></span><br><span class="line">  <span class="keyword">let</span> credits: <span class="type">Double</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> firstName: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> lastNameL: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> grades: [<span class="type">Grade</span>] = [] <span class="comment">// 表示成绩</span></span><br><span class="line">  <span class="keyword">init</span>(firstName: <span class="type">String</span>, lastName: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.firstName = firstName</span><br><span class="line">    <span class="keyword">self</span>.lastName = lastName</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">recordGrade</span><span class="params">(<span class="number">_</span> grade: Grade)</span></span> &#123;</span><br><span class="line">    grades.append(grade)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到 Student 也是 Person，所以可以在现有的 Person 类基础上进行扩展来减少代码冗余。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Grade</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> letter: <span class="type">String</span></span><br><span class="line">  <span class="keyword">let</span> points: <span class="type">Double</span></span><br><span class="line">  <span class="keyword">let</span> credits: <span class="type">Double</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> firstName: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> lastName: <span class="type">String</span></span><br><span class="line">  <span class="keyword">init</span>(firstName: <span class="type">String</span>, lastName: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.firstName = firstName</span><br><span class="line">    <span class="keyword">self</span>.lastName = lastName</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span> </span>&#123; <span class="comment">// Student继承自Person</span></span><br><span class="line">  <span class="keyword">var</span> grades: [<span class="type">Grade</span>] = []</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">recordGrade</span><span class="params">(<span class="number">_</span> grade: Grade)</span></span> &#123;</span><br><span class="line">    grades.append(grade)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过继承，Student 拥有了 Person 的属性、构造函数和其它的方法。然后就可以像使用 Person 一样使用 Student。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> john = <span class="type">Person</span>(firstName: <span class="string">"Johnny"</span>, lastName: <span class="string">"Ivy"</span>)</span><br><span class="line"><span class="keyword">let</span> jane = <span class="type">Student</span>(firstName: <span class="string">"Jane"</span>, lastName: <span class="string">"Ivy"</span>)</span><br><span class="line"><span class="built_in">print</span>(john.firstName) <span class="comment">// Johnny</span></span><br><span class="line"><span class="built_in">print</span>(jane.firstName) <span class="comment">// Jane</span></span><br></pre></td></tr></table></figure>
<p>除了继承自 Person 的属性和方法外，Student 还有自身的属性 <strong>grades</strong> 和方法，而特有的属性和方法只有 Student 的实例才可以访问。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> history = <span class="type">Grade</span>(letter: <span class="string">"B"</span>, points: <span class="number">9.0</span>, credits: <span class="number">3.0</span>)</span><br><span class="line">jane.recordGrade(history)</span><br><span class="line">john.recordGrade(history) <span class="comment">// Error: john is not a student</span></span><br></pre></td></tr></table></figure>
<p>Swift 中的类不支持多继承，一个子类最多允许继承自一个父类。</p>
<h3 id="Polymorphism"><a href="#Polymorphism" class="headerlink" title="Polymorphism"></a>Polymorphism</h3><p><strong>多态 (Polymorphism)</strong> 是许多面向对象的语言的特性，使用多态可以写出更加抽象和灵活的代码，涉及到多态的时候，主要有两个重要的性质：</p>
<ul>
<li>父类的指针可以指向子类的对象</li>
<li>不同的对象作用于同一个方法会产生不同的响应</li>
</ul>
<p>下面仍然使用介绍 Objective-C 中多态的时候所用的例子来说明 Swift 中的多态。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="comment">// 定义一个基类Animal，计算属性用于获取动物的名字，方法用于描述动物被打了以后的反应</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">beBeaten</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Cat 继承自Animal，并重写了beBeaten()方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>: <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">beBeaten</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Bark and jump to high!"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Dog继承自Animal，并重写了beBeaten()方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>: <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">beBeaten</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Give a hard bit!"</span>)</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Frog继承自Animal，并重写了beBeaten()方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Frog</span>: <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">beBeaten</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Do nothing!"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个Human类，用于攻击animal，注意beatAnimal(:)的参数类型是Animal，并没有指明具体是哪种Animal</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">  <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">beatAnimal</span><span class="params">(animal: Animal)</span></span> &#123;</span><br><span class="line">    animal.beBeaten()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> linda = <span class="type">Human</span>(name: <span class="string">"Linda"</span>)</span><br><span class="line"><span class="keyword">let</span> cat = <span class="type">Cat</span>()</span><br><span class="line"><span class="keyword">let</span> dog = <span class="type">Dog</span>()</span><br><span class="line"><span class="keyword">let</span> frog = <span class="type">Frog</span>()</span><br><span class="line"><span class="comment">// 同样的方法，作用于不同的对象，产生不同的响应</span></span><br><span class="line">linda.beatAnimal(animal: cat) <span class="comment">// Bark and jump to high!</span></span><br><span class="line">linda.beatAnimal(animal: dog) <span class="comment">// Give a hard bit!</span></span><br><span class="line">linda.beatAnimal(animal: frog) <span class="comment">// Do nothing!</span></span><br></pre></td></tr></table></figure>
<h3 id="Preventing-inheritance"><a href="#Preventing-inheritance" class="headerlink" title="Preventing inheritance"></a>Preventing inheritance</h3><p>假如有时候，存在某个类，这个类不可以被继承，或者是这个类中的某些方法不允许被重写，那么就可以使用 <strong>final</strong> 关键字，被指定为 <strong>final</strong> 的类不可以被继承，被指定为 <strong>final</strong> 的方法不允许被重写。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">beBeaten</span><span class="params">()</span></span> -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Human类不可以被继承</span></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Human</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">  <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">beatAnimal</span><span class="params">(animal: Animal)</span></span> &#123;</span><br><span class="line">    animal.beBeaten()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span>: <span class="title">Human</span> </span>&#123; <span class="comment">// Error</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 被标记为final的方法或属性不可以被重写</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">  <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">final</span> <span class="function"><span class="keyword">func</span> <span class="title">beatAnimal</span><span class="params">(animal: Animal)</span></span> &#123;</span><br><span class="line">    animal.beBeaten()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span>: <span class="title">Human</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">beatAnimal</span><span class="params">(animal: Animal)</span></span> &#123; <span class="comment">// error</span></span><br><span class="line">    animal.beBeaten()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Required-and-convenience-initializers"><a href="#Required-and-convenience-initializers" class="headerlink" title="Required and convenience initializers"></a>Required and convenience initializers</h3><p>一个类可以有多个构造函数，这意味着在子类中可以任意调用父类的构造函数来完成自身的初始化。通过给 <strong>init</strong> 方法标记 <strong>required</strong> 或者 <strong>convenience</strong> 关键字将其指定为指定构造函数或者便利构造函数。</p>
<ul>
<li>所有子类都必须实现父类的标记为 <strong>required</strong> 的构造函数，而且不需要使用 <strong>override</strong> 关键字。</li>
<li>一个指定构造函数必须调用直接父类的指定构造函数。</li>
<li>所有便利构造函数最终都要直接或间接调用自身的指定构造函数。</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> firstName: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> lastName: <span class="type">String</span></span><br><span class="line">  <span class="keyword">required</span> <span class="keyword">init</span>(firstName: <span class="type">String</span>, lastName: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.firstName = firstName</span><br><span class="line">    <span class="keyword">self</span>.lastName = lastName</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I am a person"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">convenience</span> <span class="keyword">init</span>(person: <span class="type">Person</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.<span class="keyword">init</span>(firstName: person.firstName, lastName: person.lastName)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sports: [<span class="type">String</span>]</span><br><span class="line">  <span class="keyword">required</span> <span class="keyword">init</span>(firstName: <span class="type">String</span>, lastName: <span class="type">String</span>) &#123; <span class="comment">// 不需要override 关键字，但需要required关键字以保证Student的子类也必须实现此方法</span></span><br><span class="line">    <span class="keyword">self</span>.sports = []</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I am a student"</span>)</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>(firstName: firstName, lastName: lastName)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建两个实例</span></span><br><span class="line"><span class="keyword">var</span> denny = <span class="type">Student</span>(firstName: <span class="string">"Denny"</span>, lastName: <span class="string">"Green"</span>)</span><br><span class="line"><span class="keyword">var</span> ivy = <span class="type">Student</span>(person: denny)</span><br></pre></td></tr></table></figure>
<h3 id="Retain-cycle-and-weak-references"><a href="#Retain-cycle-and-weak-references" class="headerlink" title="Retain cycle and weak references"></a>Retain cycle and weak references</h3><p>同 Objective-C 中类似，Swift 也是使用 ARC 来进行内存管理，所以同样存在循环引用的问题，解决办法就是使用<strong>弱引用 (weak reference)</strong>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> firstName: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> lastName: <span class="type">String</span></span><br><span class="line">  <span class="keyword">init</span>(firstName: <span class="type">String</span>, lastName: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.firstName = firstName</span><br><span class="line">    <span class="keyword">self</span>.lastName = lastName</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> partner: <span class="type">Student</span>?</span><br><span class="line">  <span class="keyword">deinit</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(firstName) is deinited."</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> denny: <span class="type">Student</span>? = <span class="type">Student</span>(firstName: <span class="string">"Denny"</span>, lastName: <span class="string">"Green"</span>)</span><br><span class="line"><span class="keyword">var</span> jack: <span class="type">Student</span>? = <span class="type">Student</span>(firstName: <span class="string">"Jack"</span>, lastName: <span class="string">"Bush"</span>)</span><br><span class="line">denny?.partner = jack</span><br><span class="line">jack?.partner = denny</span><br><span class="line">denny = <span class="literal">nil</span></span><br><span class="line">jack = <span class="literal">nil</span> <span class="comment">// 即使denny和jack都变成nil, 内存也没被释放，这就是因为产生了循环引用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解决办法是将partner改成weak，swift中的属性默认是strong</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">weak</span> <span class="keyword">var</span> partner: <span class="type">Student</span>?</span><br><span class="line">  <span class="keyword">deinit</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(firstName) is deinited."</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/cactus-light/">Home</a></li>
         
          <li><a href="/cactus-light/about/">About</a></li>
         
          <li><a href="/cactus-light/archives/">Writing</a></li>
         
          <li><a href="https://github.com/FoolPermi">Projects</a></li>
         
          <li><a href="/cactus-light/search/">Search</a></li>
         
          <li><a href="/cactus-light/atom.xml">RSS</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Struct"><span class="toc-number">1.</span> <span class="toc-text">Struct</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Basics"><span class="toc-number">1.1.</span> <span class="toc-text">Basics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Value-type"><span class="toc-number">1.2.</span> <span class="toc-text">Value type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Extensions"><span class="toc-number">1.3.</span> <span class="toc-text">Extensions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Conform-to-protocols"><span class="toc-number">1.4.</span> <span class="toc-text">Conform to protocols</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Class"><span class="toc-number">2.</span> <span class="toc-text">Class</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Basics-1"><span class="toc-number">2.1.</span> <span class="toc-text">Basics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reference-type"><span class="toc-number">2.2.</span> <span class="toc-text">Reference type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Extensions-1"><span class="toc-number">2.3.</span> <span class="toc-text">Extensions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Inheritance"><span class="toc-number">2.4.</span> <span class="toc-text">Inheritance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Polymorphism"><span class="toc-number">2.5.</span> <span class="toc-text">Polymorphism</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Preventing-inheritance"><span class="toc-number">2.6.</span> <span class="toc-text">Preventing inheritance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Required-and-convenience-initializers"><span class="toc-number">2.7.</span> <span class="toc-text">Required and convenience initializers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Retain-cycle-and-weak-references"><span class="toc-number">2.8.</span> <span class="toc-text">Retain cycle and weak references</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&text=Structs and Classes in Swift"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&is_video=false&description=Structs and Classes in Swift"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Structs and Classes in Swift&body=Check out this article: http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&title=Structs and Classes in Swift"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://foolpermi.github.io/2016/11/21/Structs-and-Classes-in-Swift/&name=Structs and Classes in Swift&description=&lt;p&gt;在 Swift 中&lt;strong&gt;结构体 (struct)&lt;/strong&gt; 和&lt;strong&gt;类 (class)&lt;/strong&gt; 有很多相似的地方，也有一些不同之处，下面记录并总结。内容主要参考了 &lt;em&gt;Swift Apprentice&lt;/em&gt;。&lt;/p&gt;
&lt;h2 id=&#34;Struct&#34;&gt;&lt;a href=&#34;#Struct&#34; class=&#34;headerlink&#34; title=&#34;Struct&#34;&gt;&lt;/a&gt;Struct&lt;/h2&gt;&lt;h3 id=&#34;Basics&#34;&gt;&lt;a href=&#34;#Basics&#34; class=&#34;headerlink&#34; title=&#34;Basics&#34;&gt;&lt;/a&gt;Basics&lt;/h3&gt;&lt;p&gt;Struct 作为一种常见的数据类型，在许多编程语言中都存在。我们使用 Struct 封装特定的数据结构。Swift 中赋予了 Struct 很多特性，比如 Struct 中除了可以定义属性外，还可以定义&lt;strong&gt;方法 (method)&lt;/strong&gt; 和&lt;strong&gt;构造函数 (initializer)&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;举个例子，为了表示在平面坐标系中的位置，定义一个结构体 Location，其中包括两个属性 x 和 y。&lt;/p&gt;
&lt;figure class=&#34;highlight swift&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;Location&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; x: &lt;span class=&#34;type&#34;&gt;Int&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; y: &lt;span class=&#34;type&#34;&gt;Int&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面就定义了一个结构体，然后就可以实例化以后使用，假如你没有实现  &lt;strong&gt;init&lt;/strong&gt; 方法的话，结构体可以根据属性自动产生一个构造器:&lt;/p&gt;
&lt;figure class=&#34;highlight swift&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; location = &lt;span class=&#34;type&#34;&gt;Location&lt;/span&gt;(x: &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;, y: &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;// 使用点运算符访问&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(location.x) &lt;span class=&#34;comment&#34;&gt;// 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(location.y) &lt;span class=&#34;comment&#34;&gt;// 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 FoolPermi
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/cactus-light/">Home</a></li>
         
          <li><a href="/cactus-light/about/">About</a></li>
         
          <li><a href="/cactus-light/archives/">Writing</a></li>
         
          <li><a href="https://github.com/FoolPermi">Projects</a></li>
         
          <li><a href="/cactus-light/search/">Search</a></li>
         
          <li><a href="/cactus-light/atom.xml">RSS</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/cactus-light/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/cactus-light/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/cactus-light/lib/jquery/jquery.min.js"></script>
<script src="/cactus-light/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/cactus-light/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


